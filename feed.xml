<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.2">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2022-05-20T01:20:59+02:00</updated><id>/feed.xml</id><title type="html">v2 Blog</title><subtitle>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</subtitle><entry><title type="html">C++ mask file Generator for Linux</title><link href="/dev/2022/05/19/C++-mask-file-Generator-for-Linux.html" rel="alternate" type="text/html" title="C++ mask file Generator for Linux" /><published>2022-05-19T23:46:05+02:00</published><updated>2022-05-19T23:46:05+02:00</updated><id>/dev/2022/05/19/C++%20mask%20file%20Generator%20for%20Linux</id><content type="html" xml:base="/dev/2022/05/19/C++-mask-file-Generator-for-Linux.html"><![CDATA[<h2 id="c-mask-file-generator-for-linux">C++ mask file generator for Linux</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;fstream&gt;
#include &lt;sstream&gt;
#include &lt;vector&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
#include &lt;typeinfo&gt;
#include &lt;unistd.h&gt;
using namespace std;
int main(){
	string action;
	int error=0;
    char mychar[1];
    char mychar2[1];
    fstream fout2;
    fout2.open("temp.bin", ios::out |ios::app);
	ifstream urandom;
	urandom.open("/dev/urandom", ios::in | ios::binary);
	//ss &lt;&lt; getline(urandom, byte, length);
        string s;
    const string maskName="temp.bin";
    while(error!=1){
	while(!(cin.get(mychar[0]) &amp;&amp; urandom.get(mychar2[0]))){
		error = 1;
		break;

	}
        if(error == 0){
		cout &lt;&lt; (char)(mychar[0] ^ (char)mychar2[0]);
		fout2 &lt;&lt; (char)mychar2[0];
	}
    }
    fout2.close();
    const string s2="mv temp.bin $(shasum temp.bin | awk '{print $1}')";
    //rename (maskName.c_str(), s3.c_str());
    system(s2.c_str());

}

</code></pre></div></div>]]></content><author><name></name></author><category term="Dev" /><summary type="html"><![CDATA[C++ mask file generator for Linux]]></summary></entry><entry><title type="html">Comment installer son propre serveur de clonage avec fog server</title><link href="/sysadmin/2022/05/19/Comment-installer-son-propre-serveur-de-clonage-avec-fog-server.html" rel="alternate" type="text/html" title="Comment installer son propre serveur de clonage avec fog server" /><published>2022-05-19T01:13:00+02:00</published><updated>2022-05-19T01:13:00+02:00</updated><id>/sysadmin/2022/05/19/Comment%20installer%20son%20propre%20serveur%20de%20clonage%20avec%20fog%20server</id><content type="html" xml:base="/sysadmin/2022/05/19/Comment-installer-son-propre-serveur-de-clonage-avec-fog-server.html"><![CDATA[<p>Tutoriel sur comment installer son propre serveur de clonage avec fog server</p>

<p>Published by Evgueni CHKOURINE on 2021-08-23</p>

<h2 id="installation-dun-serveur-de-clonage">Installation d’un serveur de clonage</h2>

<p>Tutoriel sur comment installer son propre serveur de clonage avec fog server</p>

<p>Evgueni CHKOURINE</p>

<p>2021-08-23</p>

<h3 id="introduction">Introduction</h3>

<h4 id="prérequis">Prérequis</h4>

<h5 id="compétences-nécessaires">Compétences nécessaires</h5>

<ul>
  <li>Être à l’aise avec l’invite de commande</li>
  <li>Savoir modifier des fichiers de configuration GNU/Linux</li>
</ul>

<h5 id="matériel-nécessaire">Matériel nécessaire</h5>

<ul>
  <li>Avoir au moins connecté en LAN un serveur debian avec une connexion internet avec un espace de stockage conséquent</li>
</ul>

<h3 id="déploiement">Déploiement</h3>

<h4 id="installation-de-fog-project">Installation de FOG Project</h4>

<h5 id="1-téléchargez-et-vérifiez-larchive-sur-le-serveur">1. Téléchargez et vérifiez l’archive sur le serveur</h5>

<p><code class="language-plaintext highlighter-rouge">wget https://github.com/FOGProject/fogproject/archive/1.5.7.tar.gz</code></p>

<h5 id="2-décompressez-larchive-et-lancer-linstallation">2. Décompressez l’archive et lancer l’installation</h5>

<p><code class="language-plaintext highlighter-rouge">tar xvzf 1.5.7.tar.gz   cd fogproject-1.5.7/bin   sudo ./installfog.sh</code></p>

<h5 id="suivez-les-instructions-dinstallation">Suivez les instructions d’installation</h5>

<ul>
  <li>Déclarez une carte réseau préférée et refusez tout en rapport avec DHCP</li>
  <li>Le serveur MariaDB (base de donnée) n’a pas de mot de passe par défaut.</li>
</ul>

<h4 id="installation-et-configuration-de-dnsmasq">Installation et configuration de dnsmasq</h4>

<h5 id="1-installez-le-paquet">1. Installez le paquet</h5>

<p><code class="language-plaintext highlighter-rouge">sudo apt-get install dnsmasq</code></p>

<h5 id="2-créez-le-fichier-etcdnsmasqdltspconf">2. Créez le fichier /etc/dnsmasq.d/ltsp.conf</h5>

<p><code class="language-plaintext highlighter-rouge"># Don't function as a DNS server:   port=0   # Log lots of extra information about DHCP transactions.   log-dhcp   # Set the root directory for files available via FTP.   tftp-root=/tftpboot   # The boot filename, Server name, Server Ip Address   dhcp-boot=undionly.kpxe,,192.168.1.49   # Disable re-use of the DHCP servername and filename fields as extra   # option space. That's to avoid confusing some old or broken DHCP clients.   dhcp-no-override   # inspect the vendor class string and match the text to set the tag   dhcp-vendorclass=BIOS,PXEClient:Arch:00000   dhcp-vendorclass=UEFI32,PXEClient:Arch:00006   dhcp-vendorclass=UEFI,PXEClient:Arch:00007   dhcp-vendorclass=UEFI64,PXEClient:Arch:00009   # Set the boot file name based on the matching tag from the vendor class (above)   dhcp-boot=net:UEFI32,i386-efi/ipxe.efi,,192.168.1.49   dhcp-boot=net:UEFI,ipxe.efi,,192.168.1.49   dhcp-boot=net:UEFI64,ipxe.efi,,192.168.1.49   # PXE menu. The first part is the text displayed to the user. The second is the timeout, in seconds.   pxe-prompt="Booting FOG Client", 1   # The known types are x86PC, PC98, IA64_EFI, Alpha, Arc_x86,   # Intel_Lean_Client, IA32_EFI, BC_EFI, Xscale_EFI and X86-64_EFI   # This option is first and will be the default if there is no input from the user.   pxe-service=X86PC, "Boot to FOG", undionly.kpxe   pxe-service=X86-64_EFI, "Boot to FOG UEFI", ipxe.efi   pxe-service=BC_EFI, "Boot to FOG UEFI PXE-BC", ipxe.efi   dhcp-range=192.168.1.49,proxy   </code></p>

<h5 id="3-remplacez-dans-ltspconf-toutes-les-occurences-de-192168149-par-ladresse-ip-de-votre-serveur">3. Remplacez dans ltsp.conf toutes les occurences de 192.168.1.49 par l’adresse ip de votre serveur</h5>

<h5 id="4-relancez-dnsmasq">4. Relancez dnsmasq</h5>

<p><code class="language-plaintext highlighter-rouge">sudo service dnsmasq restart</code></p>

<h3 id="conclusion">Conclusion</h3>

<p>Le serveur est prêt et l’interface web d’administration et le mot de passe sont fournis lors de l’installation de FOG Serveur.</p>

<p>Retrouvez-moi dans un autre tutoriel pour apprendre à piloter l’interface d’administration de FOG Project et cloner un disque dur.</p>]]></content><author><name></name></author><category term="SysAdmin" /><summary type="html"><![CDATA[Tutoriel sur comment installer son propre serveur de clonage avec fog server]]></summary></entry><entry><title type="html">Monitoring OpenBSD 6.9</title><link href="/sysadmin/2022/05/19/Monitoring-OpenBSD-6.9.html" rel="alternate" type="text/html" title="Monitoring OpenBSD 6.9" /><published>2022-05-19T01:13:00+02:00</published><updated>2022-05-19T01:13:00+02:00</updated><id>/sysadmin/2022/05/19/Monitoring%20OpenBSD%206.9</id><content type="html" xml:base="/sysadmin/2022/05/19/Monitoring-OpenBSD-6.9.html"><![CDATA[<p>Tutoriel - Monitoring OpenBSD 6.9</p>

<p>Published by Evgueni CHKOURINE echkourine@icloud.com on 2021-09-09</p>

<h2 id="tutoriel---monitoring-openbsd-69">Tutoriel - Monitoring OpenBSD 6.9</h2>

<p>Tutoriel - Monitoring OpenBSD 6.9</p>

<p>Evgueni CHKOURINE echkourine@icloud.com</p>

<h1 id="1-installation-de-slant">1. Installation de slant</h1>

<h2 id="11-sur-le-serveur-et-le-client">1.1. Sur le serveur et le client</h2>

<p>pkg_add slant</p>

<h2 id="12-sur-le-serveur">1.2. Sur le serveur</h2>

<p>vi .slantrc</p>

<p>waittime 60 ;
servers
	http://localhost/cgi-bin/slant-cgi
	http://192.168.1.108/cgi-bin/slant-cgi
	;
           layout {
             header ;
             errlog 10 ;
             host {
               cpu qmin_bars qmin hour ;
               mem qmin_bars qmin hour ;
               nprocs qmin_bars qmin hour ;
               net qmin hour ;
               disc qmin hour ;
               link ip state access ;
               rprocs qmin ;
               host record ;
             } ;
           } ;</p>

<h2 id="13-sur-le-serveur-et-les-clients">1.3. Sur le serveur et les clients</h2>

<p>vi /etc/httpd.conf</p>

<p>server “localhost” {
	listen on * port 80
		root “/htdocs”
	location “/cgi-bin/*”{
		root “/”
		fastcgi socket “/run/slowcgi.sock”
	}
}</p>

<p>rcctl enable slowcgi
rcctl start slowcgi
rcctl enable slant_collectd
rcctl start slant_collectd</p>

<h2 id="14-monitoring-sur-le-serveur">1.4. Monitoring sur le serveur</h2>

<p>slant -f ~/.slantrc</p>]]></content><author><name></name></author><category term="SysAdmin" /><summary type="html"><![CDATA[Tutoriel - Monitoring OpenBSD 6.9]]></summary></entry><entry><title type="html">Utilisation et pilotage d’un serveur de clonage informatique FOG Server</title><link href="/sysadmin/2022/05/19/Utilisation-et-pilotage-d'un-serveur-de-clonage-informatique-FOG-Server.html" rel="alternate" type="text/html" title="Utilisation et pilotage d’un serveur de clonage informatique FOG Server" /><published>2022-05-19T01:13:00+02:00</published><updated>2022-05-19T01:13:00+02:00</updated><id>/sysadmin/2022/05/19/Utilisation%20et%20pilotage%20d&apos;un%20serveur%20de%20clonage%20informatique%20FOG%20Server</id><content type="html" xml:base="/sysadmin/2022/05/19/Utilisation-et-pilotage-d&apos;un-serveur-de-clonage-informatique-FOG-Server.html"><![CDATA[<h1 id="1-introduction">1. Introduction</h1>

<h2 id="11-composition-du-serveur-fog">1.1. Composition du serveur FOG</h2>

<ul>
  <li>1 X Serveur PXE(PRE EXECUTION ENVIRONNEMENT)</li>
  <li>1 X Serveur TFTP(TRIVIAL FILE TRANSFERT PROTOCOL)</li>
  <li>1 X Serveur NFS(NETWORK FILE SYSTEM)</li>
  <li>1 X Serveur Apache2</li>
  <li>1 X DHCP Proxy (DYNAMIC HOST CONFIGURATION PROTOCOL)</li>
</ul>

<h2 id="12-matériel-nécessaire">1.2. Matériel nécessaire</h2>

<p>Dans mon cas ça sera :</p>

<ul>
  <li>1 X Raspberry Pi 4</li>
  <li>1 X Disque dur externe USB3 HDD 2To</li>
</ul>

<h2 id="13-connaissances-requises">1.3. Connaissances requises</h2>

<ul>
  <li>Savoir paramétrer le BIOS d’un ordinateur</li>
  <li>Naviguer sur un navigateur internet</li>
</ul>

<h2 id="14-schéma-du-réseau">1.4. Schéma du réseau</h2>

<p><img src="schema.png" alt="" /></p>

<h1 id="2-développement">2. Développement</h1>

<h2 id="21-présentation-de-linterface">2.1. Présentation de l’interface</h2>

<p>Connecter vous avec votre navigateur à l’adresse fournie lors de l’installation depuis votre réseau local de préférence sur la machine où vous avez installé FOG Serveur.</p>

<p>Entrez les identifiants fournis et connectez vous.</p>

<p><img src="login.png" alt="" /></p>

<p>Une fois connecté vous accédez à cette interface :</p>

<p><img src="desc.png" alt="" /></p>

<ul>
  <li>1. C’est la tableau principal, la page que nous visitons actuellement.</li>
  <li>2. C’est la gestion des utilisateurs, on peut en créer de nouveaux, changer les mots de passe.</li>
  <li>3. C’est la gestion des postes à cloner qu’ils soient source ou destination d’image disque.</li>
  <li>4. C’est la gestion des groupes, ils permettent d’envoyer une image a plusieurs postes en même temps.</li>
  <li>5. C’est la gestion des images disque, il faut les créer et les paramétrer afin de pouvoir sauvegarder dessus ou cloner depuis.</li>
  <li>6. C’est la gestion des noeuds, nous n’en utilisons pas dans notre configuration actuelle.</li>
  <li>7. C’est la gestion des Snapin, fonction inexplorée pour le moment.</li>
  <li>8. C’est la gestion des imprimantes. Fonction inexplorée pour le moment.</li>
  <li>9. C’est la gestion de la configuration de FOG pour les postes clients. Nous n’en avons pas besoin pour le moment.</li>
  <li>10. C’est la gestion des tâches en cours, comme les déploiements. On peut y regarder la progression ou annuler une tâche.</li>
  <li>11. C’est le reporting de FOG, pour voir un peut ce qu’il ce passe sur le serveur.</li>
  <li>12. C’est la configuration serveur de FOG, nous n’en avons pas besoin pour le moment.</li>
  <li>13. C’est l’icône de déconnexion de l’interface web.</li>
  <li>14. C’est un panneau informatif indiquant l’adresse ip du serveur ainsi que sa charge.</li>
  <li>15. Panneau informatif indiquant la charge disponible actuellement sur le serveur (nombre de place libres pour le déploiement).</li>
  <li>16. Panneau informatique indiquant l’espace libre restant sur le disque dur.</li>
  <li>17. Graphique représentant le nombre de déploiement d’images sur une durée.</li>
  <li>18. Graphique représentant la charge réseau du serveur.</li>
</ul>

<h2 id="22-préparation-de-déploiement">2.2. Préparation de déploiement</h2>

<ul>
  <li>1. Activez les WOL (WAKE ON LAN) dans le BIOS des tous les postes et programmez leur extinction pour la nuit (programmation d’extinction optionnelle).</li>
  <li>2. Activez le BOOT PXE sur tous les postes. L’ordre d’amorcage sera le suivant : CD/DVD, USB DRIVE, PXE BOOT, HDD/SSD.</li>
  <li>3. Supposons que vous avez deux types de machines, 1 des macs, 2 des PC (doivent être le meme modèle) - Commencez par préparer sur les deux types de postes, sur une machine, l’image qui sera copiée sur tous les autres postes. Nous avons donc deux postes à préparer. 1 pour les macs 1 pour les PC. ( S’il y plusieurs modèles de macs ou de pc il faudra une image par modèle).</li>
  <li>4. Une fois le poste prêt créons leurs images.</li>
  <li>5. Connectez-vous à l’interface de FOG Serveur et cliquez sur “Images”(5), ensuite dans le menu de gauche cliquez sur “Create New Image” et remplissez les champs comme ceci par exemple.</li>
</ul>

<p>Image Name : Image-1-PC-Salle-1 Operating System : Windows (Version) Ou Linux (je ne sais pas si ce champs est important ou est juste informatif) Image Type : Si votre poste possède plusieurs disques durs choisissez “Multiple partition images - All disks” si non choisissez “Single Disk” Image Manager : Partclone Uncompressed</p>

<ul>
  <li>6. Validez le formulaire en cliquant sur “ADD”</li>
  <li>7. Recommencez l’opération pour la salle des macs en adaptant le système d’exploitation choisissez également un autre nom pour l’image et un autre chemin (PATH).</li>
</ul>

<p>Cliquez sur “Images”(5) de l’interface puis cliquez sur “List All Image” dans le menu de gauche, vous devriez avoir quelque chose qui ressemble à ceci:</p>

<p><img src="clone.png" alt="" /></p>

<p>Ajoutons également les deux groupes pour les deux salles de machines :</p>

<ul>
  <li>1. Cliquez sur “Group”(4) et dans le menu de gauche cliquez sur “Create New Group”.</li>
  <li>2. Remplissez comme suit : Group Name : Salle-1</li>
  <li>3. Validez en cliquant sur “ADD”</li>
  <li>4. Recommencez l’opération pour “Salle-2”</li>
  <li>5. Cliquez sur “Groups”(4) et dans les menu de gauche cliquez sur “List All Groups”, vous devriez avoir ceci:</li>
</ul>

<p><img src="clone2.png" alt="" /></p>

<p>Remarque : J’ai ici organisé les groupes par salles car les modeles sont dans des salles différentes. Si vos modèles sont dans la même salle orgnisez les groupes par modèles et non par salle.</p>

<h2 id="23-ajout-des-deux-machines-maître-vers-le-serveur">2.3. Ajout des deux machines maître vers le serveur</h2>

<p>Opération à répéter sur les deux postes que vous avez préparé.</p>

<p>Démarrez les postes en PXE et arrivée dans le menu, avec les touches flêchées et la touche entrer séléctionnez “Perform Full Host Registration and Inventory”.</p>

<p><img src="registered.png" alt="" /></p>

<p><img src="config.png" alt="" /></p>

<p>Séléctionnez un nom d’hôte pour la machine, si vous avez des serveurs dns maître le même nom. Séléctionnez l’identifiant de l’image associée au poste, entrez “?” pour avoir la liste ici ce sera 6 (Image-1-PC-Salle-1). Séléctionnez l’identifiant du groupe : ici 2 (Salle-1) Appuyez sur entrer pour les autres options jusqu’au redémarrage.</p>

<p>Après avoir redémarré vous devriez avoir ceci : “Host is registered as (HOSTNAME)”.</p>

<p><img src="boothdd.png" alt="" /></p>

<p>En regardant dans l’interface en cliquant sur “Hosts”(3) et “List All Hosts” dans le menu de gauche on peut voir ceci :</p>

<p><img src="registered2.png" alt="" /></p>

<p>En cliquant sur “MASTER-PC-S1” et ensuite sur “Inventory” dans le menu du haut vous pouvez voir l’inventaire de votre machine:</p>

<p><img src="inv.png" alt="" /></p>

<p>Pour enregistrer l’image disque des deux postes, commencez par les éteindre, ensuite cliquez sur la petitie icone orange avec la flêche vert le haut sur l’un des deux postes pour le sauvegarder. Vous devriez avoir ceci :</p>

<p><img src="wol.png" alt="" /></p>

<p>Certaines fonctions ne fonctionnent pas correctement dans ma version comme l’extinction de poste. Cochez “Wake On Lan” pour un démarrage automatique du poste et “Schedule Instant” pour indiquer de faire la sauvegarde maintenant. Enfin cliquez sur “Task” por valider, le poste démarre et vous devriez avoir ceci à l’écran :</p>

<p><img src="copy.png" alt="" /></p>

<p>Une fois que le poste a fini de sauvegarder il redémarre, répétez l’opération avec l’autre machine.</p>

<p>Une fois les deux postes sauvegardés. Inscrivez les postes restants avec “Perform Full Host Registration” au démarrage comme précédemment pour les deux premiers postes.</p>

<p>Supposons que vous avez deux postes par salle. Après inscriptions de tous les postes vous devriez avoir ceci:</p>

<p><img src="final.png" alt="" /></p>

<p>Cliquez sur “Groups”(4) cliques sur “List All Groups” Pour les déploiement multi-cast cliquez sur la troisième icone la bleue qui ressemble à “V retourné” Allez voir dans “Tasks”(10) et cliquez sur “Active Tasks” dans le menu de gauche, vous pourrez voir tous les postes prêts à être déployés.</p>

<h1 id="3-conclusion">3. Conclusion</h1>

<p>Je vous laisse finir votre déploiement vous pouvez trouver plus de documentation sur le site officiel de FOG Project</p>

<p>Bon clonage.</p>]]></content><author><name></name></author><category term="SysAdmin" /><summary type="html"><![CDATA[1. Introduction]]></summary></entry></feed>